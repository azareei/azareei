---
layout: default
---

<div class="post">

  <header class="post-header">
    <h1 class="post-title" style=font-size:50px>
      {% if site.title == blank %}{{ site.title }}{% else %}<span class="font-weight-bold">{{ site.first_name }}</span>
      {{ site.middle_name }} {{ site.last_name }}{% endif %}
    </h1>
    <p class="desc">{{ page.description }}</p>
  </header>

  <article>
    {% if page.profile %}
    <div class="profile float-{% if page.profile.align == 'left' %}left{% else %}right{% endif %}">
      {% if page.profile.image %}
      <!-- <img class="img-fluid z-depth-1 rounded" src="{{ page.profile.image | prepend: '/assets/img/' | relative_url }}"> -->
      <div id="threejs-container" class="z-depth-1" style="border-radius: 20px;">
      </div>
      {% endif %}
      {% if page.profile.address %}
      <div class="address">
        {{ page.profile.address }}
      </div>
      {% endif %}
    </div>
    {% endif %}

    <div class="clearfix">
      {{ content }}
    </div>

    {% if page.news %}
    {% include news.html %}
    {% endif %}

    {% if page.selected_papers %}
    {% include selected_papers.html %}
    {% endif %}

    {% if page.social %}
    <div class="social">
      {% include social.html %}
      <div class="contact-note">{{ site.contact_note }}</div>
    </div>
    {% endif %}
  </article>


  <!-- Include Three.js and related scripts here or in the site's layout template -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.142.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.142.0/examples/js/loaders/OBJLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.142.0/examples/js/loaders/MTLLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.142.0/examples/js/controls/OrbitControls.js"></script>
  <!-- Three.js script to load the 3D model, adapted to target #threejs-container -->
  <script>
    // const container = document.getElementById('threejs-container');
    // Use the container's clientWidth and clientHeight for renderer size
    // const width = container.clientWidth;
    // const height = container.clientHeight;
    const width = 300;
    const height = 400;
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(90, width / height, 1, 10000);
    const scale = 0.77;
    camera.position.set(200 * scale, 70 * scale, 400 * scale);

    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(width, height);
    document.getElementById('threejs-container').appendChild(renderer.domElement);
    renderer.domElement.style.borderRadius = '20px';
    renderer.domElement.style.overflow = 'hidden';
    // Improved lighting
    const ambientLight = new THREE.AmbientLight(0xffffff, 9.50); // Soft white light
    scene.add(ambientLight);
    const directionalLight = new THREE.DirectionalLight(0xffffff, 2.5);
    directionalLight.position.set(100, 150, 50);
    scene.add(directionalLight);

    // OrbitControls for camera interaction
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.addEventListener('change', render); // Use if there's no animation loop
    controls.minDistance = 20;
    controls.maxDistance = 500;
    controls.enablePan = true;

    // Load MTL and then OBJ
    const mtlLoader = new THREE.MTLLoader();
    mtlLoader.load('{{ site.baseurl }}/assets/objs/material.mtl', function (materials) {
      materials.preload();
      const objLoader = new THREE.OBJLoader();
      objLoader.setMaterials(materials);
      objLoader.load('{{ site.baseurl }}/assets/objs/model.obj', function (object) {
        object.position.y = -50; // Adjust as needed
        // object.position.x = -50;
        scene.add(object);
      }, function (xhr) {
        console.log((xhr.loaded / xhr.total * 100) + '% loaded');
      }, function (error) {
        console.error('An error happened', error);
      });
    });

    function animate() {
      requestAnimationFrame(animate);
      controls.update(); // Only required if controls.enableDamping = true, or if controls.autoRotate = true
      render();
    }

    function render() {
      renderer.render(scene, camera);
    }

    animate();
  </script>

</div>